# ==============================================
# TEST ENVIRONMENT CONFIGURATION
# ==============================================

# Application Configuration
NODE_ENV=test
PORT=3001
APP_NAME=agent-flow-test
APP_VERSION=1.0.0
APP_DESCRIPTION=NestJS Agent Flow Application - Test
GLOBAL_PREFIX=api/v1
REQUEST_TIMEOUT=10000
MAX_REQUEST_SIZE=5242880

# Database Configuration (In-Memory/Test DB)
DATABASE_TYPE=postgres
DATABASE_HOST=localhost
DATABASE_PORT=5433
DATABASE_USERNAME=test_user
DATABASE_PASSWORD=test_password
DATABASE_NAME=agent_flow_test
DATABASE_SYNCHRONIZE=true
DATABASE_LOGGING=false
DATABASE_SSL=false
DATABASE_MAX_CONNECTIONS=5
DATABASE_CONNECTION_TIMEOUT=30000
DATABASE_SCHEMA=public
DATABASE_MIGRATIONS_DIR=src/core/database/migrations
DATABASE_ENTITIES_DIR=src/**/*.entity.ts

# Redis Configuration (Test Instance)
REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_PASSWORD=
REDIS_DATABASE=1
CACHE_TTL=300
REDIS_MAX_CONNECTIONS=5
REDIS_CONNECTION_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=2000
REDIS_ENABLE_READY_CHECK=true
REDIS_LAZY_CONNECT=false
REDIS_KEY_PREFIX=agent-flow:test:

# JWT Authentication Configuration
JWT_SECRET=test-jwt-secret-key-at-least-32-characters-long-for-testing-purposes
JWT_EXPIRES_IN=5m
JWT_REFRESH_SECRET=test-refresh-secret-key-at-least-32-characters-long-for-testing-purposes
JWT_REFRESH_EXPIRES_IN=1h
BCRYPT_ROUNDS=4
MAX_LOGIN_ATTEMPTS=3
LOCKOUT_DURATION=60000
SESSION_TIMEOUT=300000
PASSWORD_RESET_TOKEN_EXPIRY=5m
EMAIL_VERIFICATION_TOKEN_EXPIRY=1h

# Email Configuration (Mock)
EMAIL_HOST=localhost
EMAIL_PORT=1025
EMAIL_SECURE=false
EMAIL_USERNAME=
EMAIL_PASSWORD=
EMAIL_FROM=test@agent-flow.test
EMAIL_FROM_NAME=Agent Flow Test
EMAIL_REPLY_TO=
EMAIL_CONNECTION_TIMEOUT=5000
EMAIL_GREETING_TIMEOUT=5000
EMAIL_SOCKET_TIMEOUT=5000
EMAIL_IGNORE_TLS=true
EMAIL_REQUIRE_TLS=false
EMAIL_TEMPLATE_DIR=src/shared/email/templates

# File Storage Configuration (Local/Mock)
STORAGE_PROVIDER=local
STORAGE_UPLOAD_DIR=test-uploads
STORAGE_MAX_FILE_SIZE=1048576
STORAGE_ALLOWED_MIME_TYPES=image/jpeg,image/png,text/plain
STORAGE_BASE_URL=http://localhost:3001
STORAGE_URL_EXPIRATION_TIME=300

# Logging Configuration (Minimal for tests)
LOG_LEVEL=error
LOG_FORMAT=simple
LOG_ENABLE_CONSOLE=false
LOG_ENABLE_FILE=false
LOG_DIR=test-logs
LOG_ERROR_FILE=test-error.log
LOG_COMBINED_FILE=test-combined.log
LOG_MAX_FILE_SIZE=1048576
LOG_MAX_FILES=1
LOG_ENABLE_ROTATION=false
LOG_ENABLE_TIMESTAMP=false
LOG_ENABLE_COLORIZE=false
LOG_ENABLE_REQUEST_LOGGING=false
LOG_DATE_PATTERN=YYYY-MM-DD

# Rate Limiting Configuration (Disabled for tests)
RATE_LIMIT_ENABLED=false
RATE_LIMIT_TTL=60000
RATE_LIMIT_MAX=10000
RATE_LIMIT_AUTH_TTL=60000
RATE_LIMIT_AUTH_MAX=10000
RATE_LIMIT_PUBLIC_TTL=60000
RATE_LIMIT_PUBLIC_MAX=10000
RATE_LIMIT_ERROR_MESSAGE=Too many requests, please try again later.
RATE_LIMIT_SKIP_SUCCESSFUL=true
RATE_LIMIT_SKIP_FAILED=true
RATE_LIMIT_KEY_GENERATOR=ip

# CORS Configuration (Permissive for tests)
CORS_ENABLED=true
CORS_ORIGIN=*
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Accept,Authorization,X-Requested-With
CORS_EXPOSED_HEADERS=
CORS_CREDENTIALS=true
CORS_PREFLIGHT_CONTINUE=false
CORS_OPTIONS_SUCCESS_STATUS=true